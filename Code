#include <Wire.h>
#include "Adafruit_SHT31.h"

Adafruit_SHT31 sht31 = Adafruit_SHT31();

#define RELAY_HUMIDIFIER  5  // Реле для увлажнителя
#define RELAY_HEATER      18 // Реле для обогревателя

void setup() {
    Serial.begin(115200);
    Wire.begin();
    
    pinMode(RELAY_HUMIDIFIER, OUTPUT);
    pinMode(RELAY_HEATER, OUTPUT);
    
    if (!sht31.begin(0x44)) {
        Serial.println("Ошибка подключения SHT31!");
        while (1) delay(10);
    }
}

void loop() {
    float temp = sht31.readTemperature();
    float hum = sht31.readHumidity();

    Serial.print("Температура: "); Serial.print(temp); Serial.println(" °C");
    Serial.print("Влажность: "); Serial.print(hum); Serial.println(" %");

    // Контроль влажности
    if (hum < 40.0) {
        digitalWrite(RELAY_HUMIDIFIER, HIGH); // Включаем увлажнитель
        Serial.println("Увлажнитель ВКЛ.");
    } else {
        digitalWrite(RELAY_HUMIDIFIER, LOW);
    }

    // Контроль температуры
    if (temp < 20.0) {
        digitalWrite(RELAY_HEATER, HIGH); // Включаем обогреватель
        Serial.println("Обогреватель ВКЛ.");
    } else {
        digitalWrite(RELAY_HEATER, LOW);
    }

    delay(5000); // Пауза между измерениями
}
